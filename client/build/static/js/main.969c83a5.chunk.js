(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{109:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),A=n(26),r=n.n(A),s=n(19),i=n(17),c=n(53),l=(n(63),n(4)),u=n.n(l),d=n(6),m=n(15),E=n(14),g=function(e,t,n,a){return{type:"MESSAGES_LOADED",payload:{conversationId:e,messages:t,hasMoreMessages:n,lastMessageId:a}}},v=u.a.mark(C),f=function(e){return new Promise((function(t){return setTimeout(t,e)}))},p=[],h=function(){var e=Object(E.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://localhost:4000",t="".concat("http://localhost:4000","/api/show_all_user_chat"),e.next=4,fetch(t,{method:"GET"}).then((function(e){return e.json()})).then((function(e){var t,a=e.chat.map((function(e){return{id:e.chatRoom.id,imageUrl:n(23),imageAlt:"".concat(e.chatRoom.room_name),title:"".concat(e.chatRoom.room_name),createdAt:"1 year ago",latestMessageText:"Thank you. I appreciate that.",messages:[]}}));(t=p).push.apply(t,Object(m.a)(a)),console.log(p)})).catch((function(e){console.error("Error:",e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:return e.next=4,f(1e3);case 4:return e.next=6,Object(d.b)(g(p[0].id,p[0].messages,!1,null));case 6:return e.next=8,Object(d.b)({type:"CONVERSATIONS_LOADED",payload:{conversations:p,selectedConversation:p[0]}});case 8:case"end":return e.stop()}}),e)}));function C(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.c)("CONVERSATIONS_REQUESTED",M);case 2:case"end":return e.stop()}}),v)}var y=u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),p=t.payload.conversations,n=t.payload.selectedConversation,e.next=5,f(1e3);case 5:return e.next=7,Object(d.b)({type:"CONVERSATIONS_RENDER",payload:{conversations:p,selectedConversation:n}});case 7:case"end":return e.stop()}}),e)})),k=u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.d)("CONVERSATIONS_RENDER_REQUESTED",y);case 2:case"end":return e.stop()}}),e)})),D={2:[{id:"1",imageUrl:n(23),imageAlt:null,messageText:"Ok fair enough. Well good talking to you.",createdAt:"Oct 20",isMyMessage:!0}]},S=function(){var e=Object(E.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://localhost:4000",a="".concat("http://localhost:4000","/api/getmessage"),e.next=4,fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_room_id:t,email:"umerri4@gmail.com"})}).then((function(e){return e.json()})).then(function(){var e=Object(E.a)(u.a.mark((function e(a){var o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.msg.map((function(e){var t="umerri4@gmail.com"===e.email;return{id:e.parent_message_id,imageUrl:n(23),imageAlt:e.email,email:e.email,messageText:e.message,createdAt:"1 week ago",isMyMessage:t}}));case 2:o=e.sent,D[t]=Object(m.a)(o),console.log(D);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error:",e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(e){return new Promise((function(t){return setTimeout(t,e)}))},I=u.a.mark((function e(t){var n,a,o,A,r,s,i,c,l,m,E;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,a=n.conversationId,o=n.numberOfMessages,A=n.lastMessageId,e.next=3,S(a);case 3:return r=D[a],s=A||r.length,console.log("startIndex",s),(i=s-o)<0&&(i=0),console.log("endIndex",i),c=r.slice(i,s),console.log("pageGroup",c),l=c.length>0?c[0].id:null,m=c.reverse(),console.log("newLastMessageId",l),E=l&&0!==i,console.log("hasMoreMessages",E),e.next=18,O(500);case 18:return e.next=20,Object(d.b)(g(a,m,E,l));case 20:if(!E){e.next=25;break}return e.next=23,O(1e3);case 23:return e.next=25,Object(d.b)({type:"MESSAGES_REQUESTED",payload:{conversationId:a,numberOfMessages:o,lastMessageId:l}});case 25:case"end":return e.stop()}}),e)})),w=u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.d)("MESSAGES_REQUESTED",I);case 2:case"end":return e.stop()}}),e)})),x=function(e,t,n){var a="".concat("http://localhost:4000","/api/tenantchatting");fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({room_id:e,email:n,message:t})}).then((function(e){return e.json()})).then(function(){var e=Object(E.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Sucessfully Saved");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error:",e)}))},b=u.a.mark((function e(t){var n,a,o,A;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,a=n.conversationId,o=n.messages,A=n.email,e.next=3,O(1e3);case 3:return e.next=5,x(a,o,A);case 5:case"end":return e.stop()}}),e)})),B=u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.d)("SEND_MESSAGE",b);case 2:case"end":return e.stop()}}),e)})),j=u.a.mark(T);function T(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.a)([C(),k(),w(),B()]);case 2:case"end":return e.stop()}}),j)}var R=n(7),L={conversations:[],selectedConversation:{}};L.selectedConversation=L.conversations[1];var N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONVERSATIONS_LOADED":var a={conversations:[],selectedConversation:{}};return a.conversations=t.payload.conversations?t.payload.conversations:[],a.selectedConversation=t.payload.selectedConversation,a;case"CONVERSATIONS_RENDER":var o={};return o.conversations=t.payload.conversations,o.selectedConversation=t.payload.selectedConversation,e=null,console.log("-------------------S S State->",e),e=o,console.log("-------------------S S newState->",o),e;case"SELECTED_CONVERSATION_CHANGED":var A=Object(R.a)({},e);return A.selectedConversation=A.conversations.find((function(e){return e.id===t.conversationId})),A;case"UPDATE_CONVERSATION_DATE_MESSAGE":var r=t.payload,s=r.conversationId,i=r.message,c=r.time,l=Object(R.a)({},e);console.log("-----------After Message and Date Update",l);var u=l.conversations.find((function(e){return e.id===s}));return u.createdAt=c,u.latestMessageText=i,console.log("-----------Before Message and Date Update",l),l;case"UPDATE_CONVERSATION":var d=Object(R.a)({},e),m=d;return m.conversations.unshift({id:t.payload.conversationId,imageUrl:n(65),imageAlt:t.payload.email,title:t.payload.email,createdAt:"August 3",latestMessageText:"New Message",messages:[]}),console.log("--------------------Updated Redux conversation",m),m;case"DELETED_ADDED_CONVERSATION":var E=Object(R.a)({},e),g=t.payload.conversationId,v=E.conversations.findIndex((function(e){return e.id===g}));return E.conversations.splice(v,1),console.log("--------------------del added conversation",E),E;case"DELETE_CONVERSATION":if(e.selectedConversation){var f=Object(R.a)({},e),p=f.conversations.findIndex((function(e){return e.id===f.selectedConversation.id}));return f.conversations.splice(p,1),f.conversations.length>0?(p>0&&--p,f.selectedConversation=f.conversations[p]):f.selectedConversation=null,f}return e;case"NEW_MESSAGE_ADDED":if(e.selectedConversation){var h=Object(R.a)({},e);return h.selectedConversation=Object(R.a)({},h.selectedConversation),h.selectedConversation.messages.unshift({imageUrl:null,imageAlt:null,messageText:t.payload.textMessage,createdAt:t.payload.date+" "+t.payload.time,isMyMessage:!0}),console.log("-----------Redux triggered",h),h}return e;default:return e}},H={messageDetails:{}},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MESSAGES_LOADED":var a=t.payload,o=a.conversationId,A=a.messages,r=a.hasMoreMessages,s=a.lastMessageId,i=e.messageDetails[o],c={hasMoreMessages:r,lastMessageId:s,messages:[]};i&&(c.messages=Object(m.a)(i.messages)),c.messages=[].concat(Object(m.a)(c.messages),Object(m.a)(A));var l=Object(R.a)({},e.messageDetails);return l[o]=c,{messageDetails:l};case"UPDATED_MESSAGE_DETAIL":var u=t.payload,d=u.conversationId,E=u.messages,g=u.hasMoreMessages,v=u.lastMessageId,f=u.isMyMessage,p=u.date,h=u.time,M=e.messageDetails[d],C={hasMoreMessages:g,lastMessageId:v,messages:[]};M&&(C.messages=Object(m.a)(M.messages)),C.messages.unshift({imageUrl:n(23),imageAlt:null,messageText:E,createdAt:p+" "+h,isMyMessage:f});var y=Object(R.a)({},e.messageDetails);return y[d]=C,{messageDetails:y};default:return e}},U=Object(i.b)({conversationState:N,messagesState:Q}),F=n(16),V=(n(66),function(e){var t=e.conversations,n=null,a=o.a.useState(""),A=Object(F.a)(a,2),r=A[0],s=A[1];return o.a.useEffect((function(){var e=t.filter((function(e){return e.title===r}));console.log(e)}),[r]),t&&t.length>0&&(n=o.a.createElement("input",{type:"text",placeholder:"Search",value:r,onChange:function(e){return s(e.target.value)}})),o.a.createElement("div",{id:"search-container"},n)}),W=(n(36),function(e){var t=e.children;return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"primary-button"},t))}),G=(n(67),function(){return o.a.createElement("div",{id:"no-coversation-layout"},o.a.createElement("div",{id:"no-conversation-content"},o.a.createElement("h2",null,"No Conversations"),o.a.createElement("p",null,"Currently you have no conversations."),o.a.createElement("p",null,"To start a new conversation click the button below."),o.a.createElement(W,null,"New Conversation")))}),P=n(29),Y=n.n(P),Z=(n(68),function(e){var t=e.conversation,n=e.isActive,a=e.onConversationItemSelected,A=e.joinRoom,r=e.disconnect,s=Y()("conversation",{active:n});return o.a.createElement("div",{className:s,onClick:function(){a(t.id),r(t.id),A(t.id)}},o.a.createElement("img",{src:t.imageUrl,alt:t.imageAlt}),o.a.createElement("div",{className:"title-text"},t.title),o.a.createElement("div",{className:"created-date"},t.createdAt),o.a.createElement("div",{className:"conversation-message"},t.latestMessageText))}),J=(n(69),function(e){var t=e.conversations,n=e.selectedConversation,a=e.onConversationItemSelected,A=e.joinRoom,r=e.disconnect,s=e.conversationRender,i=e.setconversationRender;o.a.useEffect((function(){console.log("---------------conversation Changed",t),s&&(t=t,i(!1))}),[s]);var c=t.map((function(e){var t=n&&e.id===n.id;return o.a.createElement(Z,{key:e.id,onConversationItemSelected:a,joinRoom:A,disconnect:r,isActive:t,conversation:e})}));return o.a.createElement("div",{id:"conversation-list"},c)}),_=(n(70),function(){return o.a.createElement("div",{id:"new-message-container"},o.a.createElement("button",null,"+"))}),X=(n(71),function(){return o.a.createElement("svg",{className:"trash-logo",enableBackground:"new 0 0 500 500",version:"1.1",viewBox:"0 0 500 500",xmlSpace:"preserve",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},o.a.createElement("g",null,o.a.createElement("line",{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"2.6131",strokeWidth:"10",x1:"101.642",x2:"120.633",y1:"134.309",y2:"430.972"}),o.a.createElement("path",{d:"   M120.633,430.972c0,10.5,8.519,19.031,18.992,19.031",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"2.6131",strokeWidth:"10"}),o.a.createElement("line",{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"2.6131",strokeWidth:"10",x1:"139.625",x2:"360.389",y1:"450.003",y2:"450.003"}),o.a.createElement("path",{d:"   M360.389,450.003c10.474,0,18.979-8.531,18.979-19.031",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"2.6131",strokeWidth:"10"}),o.a.createElement("polyline",{fill:"none",points:"   379.367,430.972 398.386,134.309 101.642,134.309  ",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"2.6131",strokeWidth:"10"}),o.a.createElement("path",{d:"   M432.779,115.973c0,10.059-8.143,18.215-18.188,18.215",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"2.6131",strokeWidth:"10"}),o.a.createElement("line",{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"2.6131",strokeWidth:"10",x1:"414.592",x2:"85.409",y1:"134.188",y2:"134.188"}),o.a.createElement("path",{d:"   M85.409,134.188c-10.018,0-18.188-8.156-18.188-18.215",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"2.6131",strokeWidth:"10"}),o.a.createElement("path",{d:"   M67.221,115.973c0-10.019,8.17-18.188,18.188-18.188",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"2.6131",strokeWidth:"10"}),o.a.createElement("line",{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"2.6131",strokeWidth:"10",x1:"85.409",x2:"414.592",y1:"97.784",y2:"97.784"}),o.a.createElement("path",{d:"   M414.592,97.784c10.045,0,18.188,8.17,18.188,18.188",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"2.6131",strokeWidth:"10"}),o.a.createElement("line",{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"2.6131",strokeWidth:"10",x1:"307.364",x2:"307.364",y1:"97.49",y2:"68.988"}),o.a.createElement("path",{d:"   M307.364,68.988c0-10.474-8.505-18.991-18.965-18.991",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"2.6131",strokeWidth:"10"}),o.a.createElement("line",{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"2.6131",strokeWidth:"10",x1:"288.399",x2:"211.628",y1:"49.997",y2:"49.997"}),o.a.createElement("path",{d:"   M211.628,49.997c-10.487,0-18.979,8.518-18.979,18.991",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"2.6131",strokeWidth:"10"}),o.a.createElement("polyline",{fill:"none",points:"   192.649,68.988 192.649,97.49 307.364,97.49  ",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"2.6131",strokeWidth:"10"})),o.a.createElement("g",null,o.a.createElement("line",{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"2.6131",strokeWidth:"10",x1:"166.332",x2:"166.332",y1:"172.278",y2:"406.06"}),o.a.createElement("line",{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"2.6131",strokeWidth:"10",x1:"222.102",x2:"222.102",y1:"172.278",y2:"406.06"}),o.a.createElement("line",{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"2.6131",strokeWidth:"10",x1:"277.926",x2:"277.926",y1:"172.278",y2:"406.06"}),o.a.createElement("line",{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"2.6131",strokeWidth:"10",x1:"333.669",x2:"333.669",y1:"172.278",y2:"406.06"})))}),z=(n(72),function(e){var t=e.selectedConversation,n=e.onDeleteConversation,a=null;return t&&(a=o.a.createElement(o.a.Fragment,null,o.a.createElement("span",null,t.title),o.a.createElement("div",{onClick:function(){n()},title:"Delete Conversation"},o.a.createElement(X,null)))),o.a.createElement("div",{id:"chat-title"},a)}),q=(n(73),function(e){var t=e.isMyMessage,n=e.message,a=Y()("message-row",{"you-message":t,"other-message":!t}),A=t?null:o.a.createElement("img",{src:n.imageUrl,alt:n.imageAlt});return o.a.createElement("div",{className:a},o.a.createElement("div",{className:"message-content"},A,o.a.createElement("div",{className:"message-text"},n.messageText),o.a.createElement("div",{className:"message-time"},n.createdAt)))}),K=(n(74),Object(s.b)((function(e){return{getMessagesForConversation:function(t){return e.messagesState.messageDetails[t]}}}),(function(e){return{loadMessages:function(t,n){e(function(e,t,n){return{type:"MESSAGES_REQUESTED",payload:{conversationId:e,numberOfMessages:t,lastMessageId:n}}}(t,10,n))}}}))((function(e){e.selectedConversation;var t=e.conversationId,n=e.getMessagesForConversation,A=e.loadMessages,r=n(t),s=r?r.messages:null,i=null;return Object(a.useEffect)((function(){r||A(t,null)}),[r,A,t]),s&&s.length>0&&(i=s.map((function(e,t){return o.a.createElement(q,{key:t,isMyMessage:e.isMyMessage,message:e})}))),o.a.createElement("div",{id:"chat-message-list"},i)}))),$=function(e){var t=e.children,n=e.disabled;return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{type:"submit",className:"primary-button",disabled:n},t))},ee=(n(75),function(){return o.a.createElement("svg",{version:"1.1",className:"attachment-logo",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512.001 512.001",xmlSpace:"preserve"},o.a.createElement("path",{d:"M475.753,61.289c-48.329-48.329-126.967-48.329-175.296,0L15.535,346.212 c-20.713,20.713-20.713,54.413,0,75.127l50.085,50.085c20.713,20.713,54.413,20.713,75.127,0l221.305-221.305 c20.713-20.713,20.713-54.413,0-75.127s-54.413-20.713-75.127,0L168.981,292.935c-6.915,6.915-6.915,18.127,0,25.042 c6.915,6.915,18.127,6.915,25.042,0l117.943-117.943c6.903-6.903,18.137-6.906,25.042,0c6.906,6.906,6.903,18.14,0,25.042 L115.705,446.38c-6.903,6.903-18.137,6.906-25.042,0l-50.085-50.085c-6.906-6.906-6.903-18.14,0-25.042L325.499,86.332 c34.519-34.519,90.689-34.522,125.211,0s34.519,90.693,0,125.211l-181.56,181.56c-6.915,6.915-6.915,18.127,0,25.042 c6.915,6.915,18.127,6.915,25.042,0l181.56-181.56C524.083,188.256,524.083,109.62,475.753,61.289z"}),o.a.createElement("g",null,o.a.createElement("path",{d:"M299.446,187.512L181.503,305.456c-4.623,4.623-6.081,11.149-4.523,17.045 c-2.924-0.772-5.705-2.231-7.997-4.523c-6.915-6.915-6.915-18.127,0-25.042l117.943-117.943c20.713-20.713,54.413-20.713,75.127,0 c2.137,2.137,3.999,4.44,5.695,6.826C347.015,167.074,318.022,168.936,299.446,187.512z"}),o.a.createElement("path",{d:"M456.654,92.911c2.265,1.855,4.465,3.83,6.578,5.943c34.522,34.522,34.519,90.693,0,125.211 l-181.56,181.56c-4.623,4.623-6.081,11.149-4.523,17.045c-2.924-0.772-5.705-2.231-7.997-4.523c-6.915-6.915-6.915-18.127,0-25.042 l181.56-181.56C483.117,179.138,485.094,127.655,456.654,92.911z"}),o.a.createElement("path",{d:"M115.705,446.38l221.305-221.305c4.613-4.613,6.07-11.142,4.519-17.04 c2.927,0.77,5.712,2.228,8.003,4.519c6.906,6.906,6.903,18.14,0,25.042L128.226,458.902c-6.903,6.903-18.137,6.906-25.042,0 L90.663,446.38C97.568,453.286,108.802,453.283,115.705,446.38z"}),o.a.createElement("path",{d:"M312.978,73.811L28.057,358.732c-20.713,20.713-20.713,54.413,0,75.127l-12.521-12.521 c-20.713-20.713-20.713-54.413,0-75.127L300.457,61.289c48.329-48.329,126.967-48.329,175.296,0 c2.113,2.113,4.015,4.354,5.943,6.577C433.056,25.693,359.195,27.594,312.978,73.811z"})))}),te=(n(76),function(e){return 0===ne(e).length}),ne=function(e){return e.trim()},ae=function(e){var t=e.selectedConversation,n=e.onMessageSubmitted,A=e.onMessageUpdate,r=e.messageDetails,s=(e.sendMessage,e.SendLiveMessage),i=e.updateConversationDateMessage,c=Object(a.useState)(""),l=Object(F.a)(c,2),d=l[0],m=l[1],g=Object(a.useState)(!1),v=Object(F.a)(g,2),f=v[0],p=v[1],h=Object(a.useState)(!0),M=Object(F.a)(h,2),C=M[0],y=M[1],k=null,D=null;Object(a.useEffect)((function(){C&&p(te(d))}),[d,C]),t&&(k=o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{title:"Add Attachment"},o.a.createElement(ee,null)),o.a.createElement("input",{type:"text",placeholder:"type a message",value:d,onChange:function(e){m(e.target.value)}}),o.a.createElement($,{disabled:f},"Send")),D=function(e){if(e.preventDefault(),!te(d)){var a=new Date,o=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate(),c=a.getHours()+":"+a.getMinutes()+":"+a.getSeconds();if(n(d,o,c),void 0!==t){var l=t.id;A(l,d,r[l].hasMoreMessages,r[l].lastMessageId,!0,o,c),s(d);S(l,d,"umerri4@gmail.com"),p(!0),y(!1),i(l,d,o,c)}m("")}});var S=function(){var e=Object(E.a)(u.a.mark((function e(t,n,a){var o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://localhost:4000",o="".concat("http://localhost:4000","/api/tenantchatting"),e.next=4,fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({room_id:t,email:a,message:n})}).then((function(e){return e.json()})).then(function(){var e=Object(E.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Sucessfully Saved"),setTimeout((function(){p(!1),y(!0)}),1e3);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error:",e)}));case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();return o.a.createElement("form",{id:"chat-form",onSubmit:D},k)},oe=(n(77),n(52)),Ae=n.n(oe).a.connect("/"),re=Object(s.b)((function(e){return{conversations:e.conversationState.conversations,selectedConversation:e.conversationState.selectedConversation,messageDetails:e.messagesState.messageDetails}}),(function(e){return{conversationChanged:function(t){return e(function(e){return{type:"SELECTED_CONVERSATION_CHANGED",conversationId:e}}(t))},onMessageSubmitted:function(t,n,a){e(function(e,t,n){return{type:"NEW_MESSAGE_ADDED",payload:{textMessage:e,date:t,time:n}}}(t,n,a))},onMessageUpdate:function(t,n,a,o,A,r,s){e(function(e,t,n,a,o,A,r){return{type:"UPDATED_MESSAGE_DETAIL",payload:{conversationId:e,messages:t,hasMoreMessages:n,lastMessageId:a,isMyMessage:o,date:A,time:r}}}(t,n,a,o,A,r,s))},sendMessage:function(t,n,a){e(function(e,t,n){return{type:"SEND_MESSAGE",payload:{conversationId:e,messages:t,email:n}}}(t,n,a))},updateConversation:function(t,n){e(function(e,t){return{type:"UPDATE_CONVERSATION",payload:{conversationId:e,email:t}}}(t,n))},deletedAddedConversation:function(t){e(function(e){return{type:"DELETED_ADDED_CONVERSATION",payload:{conversationId:e}}}(t))},onDeleteConversation:function(){e({type:"DELETE_CONVERSATION"})},loadConversations:function(){e({type:"CONVERSATIONS_REQUESTED"})},updateConversationDateMessage:function(t,n,a,o){e(function(e,t,n,a){return{type:"UPDATE_CONVERSATION_DATE_MESSAGE",payload:{conversationId:e,message:t,date:n,time:a}}}(t,n,a,o))}}}))((function(e){var t=e.conversations,n=e.selectedConversation,A=e.messageDetails,r=e.conversationChanged,s=e.onMessageSubmitted,i=e.onMessageUpdate,c=e.sendMessage,l=e.onDeleteConversation,u=e.loadConversations,d=e.updateConversation,m=e.deletedAddedConversation,E=e.updateConversationDateMessage,g=Object(a.useState)(!1),v=Object(F.a)(g,2),f=v[0],p=v[1];Object(a.useEffect)((function(){u()}),[u]),Object(a.useEffect)((function(){Ae.on("message",(function(e){i(e.room,e.text,!1,null,!1)})),Ae.on("add_active_room",(function(e){m(e.room),d(e.room,e.username),p(!0)}))}),[Ae]);var h=o.a.createElement(o.a.Fragment,null,o.a.createElement(G,null));return t.length>0&&(h=o.a.createElement(o.a.Fragment,null,o.a.createElement(K,{conversationId:n.id,selectedConversation:n}))),o.a.createElement("div",{id:"chat-container"},o.a.createElement(V,{conversations:t}),o.a.createElement(J,{onConversationItemSelected:r,joinRoom:function(e){Ae.emit("joinRoom",{username:"umerri4@gmail.com",roomname:e})},disconnect:function(e){Ae.emit("disconect")},conversations:t,selectedConversation:n,conversationRender:f,setconversationRender:p}),o.a.createElement(_,null),o.a.createElement(z,{selectedConversation:n,onDeleteConversation:l}),h,o.a.createElement(ae,{selectedConversation:n,onMessageSubmitted:s,onMessageUpdate:i,messageDetails:A,sendMessage:c,SendLiveMessage:function(e){Ae.emit("chat1",e)},updateConversationDateMessage:E}))})),se=function(){return o.a.createElement(re,null)},ie=Object(c.a)(),ce=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):i.c)(Object(i.a)(ie)),le=Object(i.d)(U,ce);ie.run(T),r.a.render(o.a.createElement(s.a,{store:le},o.a.createElement(se,null)),document.getElementById("root"))},23:function(e,t){e.exports="data:image/png;base64,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"},36:function(e,t,n){},54:function(e,t,n){e.exports=n(109)},63:function(e,t,n){},65:function(e,t){e.exports="data:image/png;base64,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"},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){}},[[54,1,2]]]);
//# sourceMappingURL=main.969c83a5.chunk.js.map